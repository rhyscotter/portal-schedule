<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Calendar</title>

<style>
:root{
  --bg:#000;
  --card:#111;
  --border:#1e1e1e;
  --text:#fff;
  --muted:#8a8a8a;

  --gameday:#7B2EFF;
  --gameday2:#B266FF;
}

*{ box-sizing:border-box; }
body{
  margin:0;
  background:#000;
  color:#fff;
  font-family:Arial, sans-serif;
}

/* ================= BACKGROUND ================= */
.stage{
  min-height:100vh;
  padding:22px;
  background:
    radial-gradient(1000px 600px at 20% -10%, rgba(255,255,255,.05), transparent 60%),
    linear-gradient(180deg,#000 0%,#050505 100%);
  position:relative;
}
.stage::before{
  content:"";
  position:absolute;
  inset:-40% -20%;
  transform:rotate(-14deg);
  background:linear-gradient(90deg, rgba(255,255,255,0), rgba(255,255,255,.05), rgba(255,255,255,0));
  opacity:.18;
}

.wrap{ max-width:980px; margin:auto; position:relative; z-index:2; }

/* ================= TITLE ================= */
.title{
  font-family:Impact, Haettenschweiler, 'Arial Narrow Bold', sans-serif;
  font-size:42px;
  text-transform:uppercase;
  letter-spacing:1px;
  position:relative;
  padding-bottom:14px;
  display:inline-block;
}

/* ðŸ”¥ ALWAYS-ANIMATED PURPLE UNDERLINE */
.title::after{
  content:"";
  position:absolute;
  left:0;
  bottom:0;
  height:5px;
  width:100%;
  border-radius:999px;

  background:linear-gradient(
    90deg,
    transparent 0%,
    var(--gameday) 25%,
    var(--gameday2) 50%,
    var(--gameday) 75%,
    transparent 100%
  );

  background-size:200% 100%;
  animation: underlineMove 3s linear infinite,
             underlineGlow 2.4s ease-in-out infinite;
}

@keyframes underlineMove{
  0%{ background-position:0% 0%; }
  100%{ background-position:200% 0%; }
}

@keyframes underlineGlow{
  0%{ box-shadow:0 0 4px rgba(123,46,255,.25); }
  50%{ box-shadow:0 0 16px rgba(123,46,255,.55); }
  100%{ box-shadow:0 0 4px rgba(123,46,255,.25); }
}

/* ================= CONTROLS ================= */
.controls{ margin:14px 0; display:flex; gap:10px; }
button{
  border:1px solid rgba(255,255,255,.14);
  background:rgba(255,255,255,.04);
  color:#fff;
  padding:8px 12px;
  border-radius:12px;
  cursor:pointer;
  transition:.15s ease;
}
button:hover{ background:rgba(255,255,255,.08); transform:translateY(-1px); }

.monthLine{ color:#bbb; margin-bottom:10px; }

/* ================= GRID ================= */
.grid{
  display:grid;
  grid-template-columns: repeat(7, 1fr);
  gap:10px;
}

.cell{
  background:rgba(17,17,17,.85);
  border:1px solid rgba(255,255,255,.10);
  border-radius:14px;
  min-height:110px;
  padding:10px;
  position:relative;
  overflow:hidden;
  transition: all .18s ease;
}

/* subtle diagonal */
.cell::before{
  content:"";
  position:absolute;
  inset:-60% -20%;
  transform:rotate(-12deg);
  background:linear-gradient(90deg, rgba(255,255,255,0), rgba(255,255,255,.04), rgba(255,255,255,0));
  opacity:.18;
}

/* ðŸ”¥ Hover animation on date */
.cell:hover{
  transform:translateY(-2px);
  background:#1a1a1a;
  border-color:rgba(255,255,255,.18);
  box-shadow:0 0 22px rgba(123,46,255,.18);
}

.dateNum{
  font-weight:bold;
  font-size:13px;
  margin-bottom:6px;
}

/* event block */
.event{
  font-size:12px;
  padding:5px 7px;
  border-radius:8px;
  background:rgba(255,255,255,.05);
  margin-top:4px;
}
.event.game{
  background:rgba(123,46,255,.18);
}
</style>
</head>

<body>
<div class="stage">
<div class="wrap">

<div class="title">Calendar</div>

<div class="controls">
<button onclick="prev()">Prev</button>
<button onclick="next()">Next</button>
<button onclick="today()">Today</button>
</div>

<div class="monthLine" id="monthLine"></div>

<div class="grid" id="grid"></div>

</div>
</div>

<script>
const EVENTS = {
  "2026-03-01":[{title:"Game vs Colts", game:true}],
  "2026-03-03":[{title:"Training"}],
  "2026-03-06":[{title:"Training"}],
};

let cursor = new Date();

function render(){
  const year = cursor.getFullYear();
  const month = cursor.getMonth();

  const first = new Date(year,month,1);
  const last = new Date(year,month+1,0);

  document.getElementById("monthLine").innerText =
    first.toLocaleString(undefined,{month:"long",year:"numeric"});

  const start = first.getDay();
  const days = last.getDate();

  let html = "";
  for(let i=0;i<start;i++) html += `<div class="cell"></div>`;

  for(let d=1; d<=days; d++){
    const dateStr = `${year}-${String(month+1).padStart(2,"0")}-${String(d).padStart(2,"0")}`;
    const events = EVENTS[dateStr] || [];

    html += `<div class="cell"><div class="dateNum">${d}</div>`;

    events.forEach(e=>{
      html += `<div class="event ${e.game?'game':''}">${e.title}</div>`;
    });

    html += `</div>`;
  }

  document.getElementById("grid").innerHTML = html;
}

function prev(){ cursor.setMonth(cursor.getMonth()-1); render(); }
function next(){ cursor.setMonth(cursor.getMonth()+1); render(); }
function today(){ cursor=new Date(); render(); }

render();
  const statusEl = document.getElementById("status"); // optional if you have a status element

window.addEventListener("message", (ev) => {
  const data = ev.data;
  if (!data) return;

  if (data.type === "SCHEDULE_ERROR") {
    console.log("Calendar error:", data.message);
    if (statusEl) statusEl.textContent = data.message;
    return;
  }

  if (data.type !== "SCHEDULE_INIT") return;

  console.log("âœ… Calendar received events:", data.events?.length || 0);

  // IMPORTANT: use the events coming from Wix CMS
  applyClubTheme(data.clubSlug);
  renderCalendar(data.events || []);
});
</script>

</body>
</html>
